# 스와핑


메모리에 적재된 프로세스 중 현재 실행 중이지 않은 프로세스를 보조 기억 장치에 보내고 실행할 프로세스를 메모리에 적재하는 방식을 스와핑이라고 합니다. 메모리에 있던 프로세스를 보조 기억 장치에 보내는 곳을 스왑 영역이라고하며 메모리에 적재되어 있던 프로세스를 보조 기억장치에 보내는 것을 스왑 아웃 실행할 프로세스를 메모리에 옮기는 것을 스왑인이라고 합니다. 스와핑을 이용하면 프로세스들이 요구하는 메모리 주소 공간의 크기가 물리 메모리 주소 공간보다 큰 경우에도 동시에 실행할 수 있습니다.

# 메모리 할당

메모리 할당이란 프로세스를 메모리 공간 중 어느 곳에 적재할 지를 결정하는 방법입니다.

대표적으로 , 최초 적합 , 최적 적합 , 최악 적합이 있습니다.

- 최초 적합 : 현재 프로세스를 적재할 수 있는 메모리 공간 중 가장 처음 발견한 곳에 할당
- 최적 적합 : 현재 프로세스를 적재할 수 있는 메모리 공간 중 가장 크기가 적합한 , 즉 가장 작은 메모리 공간을 가진 곳에 할당
- 최악 적합 : 현재 프로세스를 적재할 수 있는 메모리 공간 중 가장 크기가 큰 공간에 할당

프로세스를 메모리에 연속 배치하는 경우 스와핑 과정과 프로세스의 크기에 따라 메모리 공간 내 프로세스 사이의 빈 공간이 발생할 수 있는데 이를 외부 단편화라고 합니다. 외부 단편화는 결국 메모리 공간의 낭비로 이어집니다.

외부 단편화를 해결하기 위해서는 메모리 압축 기법이 있습니다. 

메모리 압축 비법은 메모리 내 저장된 프로세스를 적당히 재배치 시켜 작은 빈 공간들을 큰 빈공간으로 만듭니다. 하지만 메모리 압축 기법을 위해 시스템이 하던 일을 멈추고 메모리 정보를 옮겨야하므로 오버헤드로 이어질 수 있습니다.

# 가상 메모리란?

메모리 관리 기법중 하나로 프로세스 전체가 메모리 내 올라오지 않더라도 실행이 가능하도록 하는 기법입니다.

각 프로그램이 실행될 때 필요한 부분만 메모리에  올라오기 때문에 더 많은 프로그램을 실행할 수 있고 물리 메모리보다 더 큰 프로그램을 실행시킬 수도 있습니다.

# 왜 가상 메모리를 사용할까?

가상 메모리를 사용하지 않는다면 프로세스 정보를 모두 메모리에 적재한 뒤 실행해야합니다.

이는 프로세스 내 현재 실행하지 않는 불필요한 영역도 함께 메모리에 적재하는 것을 의미합니다. 다른 프로세스들을 메모리에 적재하고 실행하기 위해서는 스왑 영역으로 스왑 아웃 , 스왑 인 과정이 빈번이 일어나게 됩니다.

가상 메모리를 사용하면  프로세스내 현재 실행하는 필요한 정보만 물리메모리에 적재한 뒤 실행하는 방법으로 불필요한 스와핑을 줄일 수 있으며 물리 메모리 공간보다 큰 메모리를 가진 프로세스를 실행할 수 있습니다.

# 가상 메모리 기법

가상 메모리가 기법에는 대표적으로 페이징 기법이 있습니다.

페이징은 프로세스의 논리 주소 공간을 페이지라는 일정한 단위로 자르고 물리 메모리 주소 공간을 프레임이라는 페이지와 동일한 크기의 일정한 단위로 자른 뒤 페이지를 프레임에 할당하는 메모리 관리 기법입니다.

CPU 는 MMU 의 도움을 받아 실행시점에 논리적 주소인 페이지에 대한 프레임 번호가 매핑되어 있는 페이지 테이블을 확인하여 물리적인 주소를 참조해서 실행합니다.

# 페이지 교체 알고리즘

페이징 기법으로 메모리를 관리하는 운영체제에서 필요한 페이지가 메모리에 적재되어 있지 않을 시 어떤 페이지 프레임을 선택해 교체할 것인지를 결정하는 방법을 페이지 교체 알고리즘이라고 합니다.

- FIFO  : 가장 오래된 페이지를 교체합니다.
- LRU : 가장 오랫동안 사용되지 않은 페이지를 교체하는 알고리즘입니다.
- LFU : 참조 횟수가 가장 적은 페이지를 교체합니다.
